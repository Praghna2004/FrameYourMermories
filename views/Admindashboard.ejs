<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="Admindashboard.css">
<script src="https://kit.fontawesome.com/c4254e24a8.js"></script>
</head>
<body>
    
<div class="sidenav" >
    <div class="header">
        <h3>Admin</h3>
 <div><button id="partner">Partner stats</button>
    <button id="Client">Client stats</button>
    <button id="Finance">Finance</button>
    <button id="Breg">Registrations</button>
    <button id="complaints">Complaints</button></div>
    </div>
<div><button id="logout"><a href="/frameyourmemories">Logout</a></button></div>
</div>

<div class="main partner1">
  <h2 style="text-align: center;">Partner Statistics</h2>
  <div class="percentages"> 
    <div class="partners">
      <div style="text-align: center;color: greenyellow;"><%= partners.length %></div>
      <div style="text-align: center;"><i class="fa-solid fa-user"></i></div>
      <div style="text-align: center;">Partners</div>
    </div>
    <div class="prod">
      <div style="text-align: center;color: blue;"><%= products.length %></div>
      <div style="text-align: center;"><i class="fa-sharp fa-solid fa-truck"></i></div>
      <div style="text-align: center;">Products</div>
    </div>
    <div class="sales">
      <div style="text-align: center;color: palevioletred"><%= sales %></div>
      <div style="text-align: center;"><i class="fa-sharp fa-solid fa-chart-simple"></i></div>
      <div style="text-align: center;">Sales</div>
    </div>
  </div>
  <div><h4>Details : </h4></div>
  <% if(partners.length>0){ %>
  <div class="partnermain">
    <div class="pmainheader">
      <h5 style="margin: 0;">Name</h5>
      <h5 style="margin: 0;">Email</h5>
      <h5 style="margin: 0;">Products</h5>
      <h5 style="margin: 0;">Edit</h5>
    </div>
    <div style="overflow-y: auto;height: 50vh;">
      
    <% partners.forEach(partner => { %>
      <div class="partdetails">
        <div><%= partner.username %></div>
        <div><%= partner.email%></div>
        <% var i=0 %>
        <% products.forEach(prod=>{ %>
          <% if(prod.bid==partner._id){ %>
            <% i++ %>
         <% } %>
        <% }) %>
        <div><%= i %></div>
        <div><button> <i class="fa-solid fa-ellipsis"></i></button></div>
      </div>
    <% }) %>
  </div>
  </div>
<% }else{ %>
  <div><h2>NO PARTNERS REGISTERED YET !</h2></div>
<% } %>
</div>
   <div class="main clients1" >
    <h2 style="text-align: center;">Client Statistics</h2>
  <div class="percentages"> 
    <div class="partners">
      <div style="text-align: center;color: greenyellow;"><%= clients.length %></div>
      <div style="text-align: center;"><i class="fa-solid fa-user"></i></div>
      <div style="text-align: center;">Clients</div>
    </div>
    <div class="prod">
      <div style="text-align: center;color: blue;"><%=noofprod%></div>
      <div style="text-align: center;"><i class="fa-solid fa-cart-shopping"></i></div>
      <div style="text-align: center;">Bookings</div>
    </div>
    <div class="sales">
      <div style="text-align: center;color: palevioletred"><%=sales%></div>
      <div style="text-align: center;"><i class="fa-solid fa-pencil"></i></div>
      <div style="text-align: center;">Reviews</div>
    </div>
  </div>
  <div><h4>Details : </h4></div>
    <% if(clients.length>0){ %>
      <div class="partnermain">
        <div class="pmainheader">
          <h5 style="margin: 0;">Name</h5>
          <h5 style="margin: 0;">Email</h5>
          <h5 style="margin: 0;">Bookings</h5>
          <h5 style="margin: 0;">Edit</h5>
        </div>
        <div style="overflow-y: auto;height: 50vh;">
        <% clients.forEach(client=>{ %>
          <div class="clientdetails">
            <div><%= client.username %></div>
            <div class="cemail"><%= client.email %></div>
            <div><%= 5 %></div>
            <div><button> <i class="fa-solid fa-ellipsis"></i></button></div>
          </div>
        <% }) %>
      </div>
      </div>
    <% }else{ %>
      <div><h2>NO CLIENTS YET!</h2></div>
   <% } %>
   </div>
   <div  class="main finance1"style="color: black;display: none;">
    suhas
   </div>
   <div class="main Breg1"style="color: black;display: none;">
    <div style="text-align: center;">PARTNER REGISTRATIONS</div>>
   </div>
   <div class="main complaints1 complaints" style="display: none;">
    <div style="text-align: center;">CUSTOMER COMPLAINTS</div>
    <% if(complaints.length>0){ %>
        <% complaints.forEach( complain=>{%>
            <div class="complain" style="display: flex;flex-direction: row;">
              <div style="display: flex;flex-direction: column;">
                <p>NAME &nbsp;&nbsp;&nbsp;: <%=complain.name %></p>
                <p>MAIL &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <%=complain.email %></p>
                <p>PHONE : <%=complain.mobile %></p></div>
                <div style="display: flex;flex-direction: column;">
                  <div style="margin-top: 10px;">QUERY : </div>
                  <div style="height: 170px;overflow-y: auto;background: rgba(0,0,0,0.4);padding: 10px;border-radius:10px ;"><%=complain.query %></div>
                </div>
            </div>
        <% }) %> 
    <% }else{ %>
      <div></div>
    <p style="text-align: center;">NO COMPLAINTS</p>
    <% } %>
</div>
  <script src="Admindashboard.js"></script>
</body>
</html> 
